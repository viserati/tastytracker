<h2>TastyTracking</h2>
<div>
  <div><button (click)="gotoList()">Edit Meals</button></div>

  <div>
    <label>I spent $</label>
    <input id="mealAmount" [(ngModel)]="meal.amount" />
  </div>

  <div>
    <label>At</label>
    <select id="restaurantID" #restaurantID
      [ngModel]="meal.location"
      (change)="onSelect($event.target.value,
        restaurantID.options[restaurantID.selectedIndex].text)">
    <option value="0">-- select a restaurant --</option>
    <option *ngFor="let r of restaurants"
      value="{{r.id}}">{{r.name}}</option>
    </select><button *ngIf="!showRestDiv"
               (click)="showRestaurants()">Edit</button>
    <div *ngIf="showRestDiv">
      <div *ngIf="restaurantID.value > 0">
        <input type="text" id="editRestaurantName" #editRestaurantName
          value="{{selectedRestaurant}}" size="30" />
        <button (click)="update(restaurantID.value, editRestaurantName.value)">
          Edit</button>
        <button (click)="delete(restaurantID.value)">Delete</button>
      </div>
      <div *ngIf="restaurantID.value == 0">
        <input type="text" id="newRestaurantName"
          #newRestaurantName size="30" />
        <button (click)="add(newRestaurantName.value)">Add</button>
      </div>
      <button (click)="showRestaurants()">Close</button>
    </div>
  </div>

  <div>
    <label>On</label>
    <select id="mealName" [(ngModel)]="meal.name">
    <option value="B">Breakfast</option>
    <option value="L">Lunch</option>
    <option value="D">Dinner</option>
    <option value="S">Snack</option>
    </select>
  </div>

  <div>
    <label>On this date</label>
    <input id="mealDate" [(ngModel)]="meal.date" />
  </div>
  <button (click)="save()">Save</button>      
</div>

<totals [thumper]="thumper"></totals>

<trends [thumper]="thumper"></trends>
